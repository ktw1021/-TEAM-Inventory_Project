<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="orderCheck">
	
	<!-- order check list -->
	<select id="orderCheckList" resultType="OrderVo">
		select order_id as orderId, branch_id as branchId, order_date as orderDate, checked from book_order order by order_date desc
	</select>

	<!-- order check list 지점 별로 구분하기 -->
	<select id = "orderCheckbranch" parameterType="String" resultType="OrderVo">
		select order_id as orderId, branch_id as branchId, order_date as orderDate, checked from book_order where branch_id = #{id} order by order_date desc
	</select>
	
	<!-- order detail 조회 -->
	<select id ="selectOrderDetail" parameterType="String" resultType="OrderVo">
		select bo.order_id as orderId, bo.branch_id as branchId, bo.order_date as orderDate, bo.checked, od.book_code as bookCode, od.quantity as quantity, 
		bl.book_name as bookName
		from book_order bo join order_detail od on bo.order_id = od.order_id 
		join book_list bl on od.book_code = bl.book_code where bo.order_id = #{id}
	</select>
	
	<!-- order 거절 -> orderList의 order_chheck만 코드 수정 -->
	<update id="refuseOrder" parameterType="String">
		UPDATE book_order SET order_check = '1' WHERE order_id = #{no}
	</update>
	
	<!-- order 승인 -> orderList의 order_check 코드 수정 -->
	
	
	<!-- order 승인2 -> stock_in table에 새로운 데이터 입력 -->
	
	
</mapper>